<app-loading-spinner [loading]="loading"></app-loading-spinner>

<div class="container-fluid position-relative mb-3">
    <h2 class="text-center mb-0">Accounts</h2>
    <button
        (click)="linkAccount()"
        class="btn btn-primary d-none d-sm-block position-absolute"
    >
        Link an Account
    </button>
    <button
        (click)="linkAccount()"
        class="btn btn-primary d-block d-sm-none position-absolute"
    >
        +
    </button>
</div>

@if (!itemsWithAccounts.length) {
    <div class="card mb-2">
        <div class="card-body">
            <h4 class="text-center mb-0">No accounts linked yet</h4>
        </div>
    </div>
} @else {
    @for (item of itemsWithAccounts; track $index) {
        <div class="card mb-2">
            <div class="card-body">
                <h5 class="card-title">{{ item.institutionName }}</h5>
                <table class="table table-striped table-hover table-sm mb-0">
                    <thead class="table-dark">
                        <tr>
                            <th scope="col">Name</th>
                            <th scope="col">Type</th>
                            <th scope="col">Number</th>
                        </tr>
                    </thead>
                    <tbody class="table-group-divider">
                        @for (account of item.accounts; track $index) {
                            <tr>
                                <td>{{ account.name }}</td>
                                <td>
                                    {{ account.type }} ({{ account.subtype }})
                                </td>
                                <td>
                                    &middot;&middot;&middot;&middot;
                                    {{ account.mask }}
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    }
}
